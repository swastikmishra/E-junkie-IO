webpackJsonp([6],{"F49/":function(t,e){},rZfT:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={name:"Pages",data:()=>({Pages:null,Folders:null,totalPages:0,newFolder:null,newFolderDialogVisible:!1}),mounted:function(){var t=this;this.axios.post("/api/pages",{}).then(e=>{t.preparePages(e.data)}).catch(t=>{console.log(t)})},methods:{preparePages:function(t){for(var e in this.Pages=t.Pages,this.Folders=t.Folders,this.totalPages=0,this.Pages){this.Pages[e].folder=null;var s=e.split("/");s.length>1&&(this.Pages[e].folder=s[0]),this.Pages.hasOwnProperty(e)&&this.totalPages++}},togglePageVisibility:function(t,e){var s=this.$loading({lock:!0,text:"Updating",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),i=this;this.axios.post("/api/page/visibility",{key:t,page:e}).then(t=>{i.preparePages(t.data),setTimeout(()=>{s.close()},100)}).catch(t=>{setTimeout(()=>{s.close()},100)})},deletePage:function(t){var e=this.$loading({lock:!0,text:"Updating",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),s=this;this.axios.post("/api/page/delete",{key:t}).then(t=>{s.preparePages(t.data),s.$message({showClose:!0,message:"Page deleted !",type:"danger"}),setTimeout(()=>{e.close()},100)}).catch(t=>{setTimeout(()=>{e.close()},100)})},saveNewFolder:function(){var t=this.$loading({lock:!0,text:"Add New Folder",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),e=this;this.axios.post("/api/page/addfolder",{key:e.newFolder}).then(s=>{void 0===s.data.status?(e.$message({showClose:!0,message:"Folder added successfully",type:"success"}),e.newFolderDialogVisible=!1,e.preparePages(s.data)):e.$message({showClose:!0,message:s.data.error,type:"danger"}),setTimeout(()=>{t.close()},100)}).catch(e=>{setTimeout(()=>{t.close()},100)})},deleteFolder:function(t){var e=this.$loading({lock:!0,text:"Deleting Folder",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),s=this;this.axios.post("/api/page/deletefolder",{key:t}).then(t=>{void 0===t.data.status?(s.$message({showClose:!0,message:"Folder removed successfully",type:"success"}),s.preparePages(t.data)):s.$message({showClose:!0,message:t.data.error,type:"danger"}),setTimeout(()=>{e.close()},100)}).catch(t=>{setTimeout(()=>{e.close()},100)})}}},a={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"pages"}},[s("div",{staticClass:"columns is-multiline",staticStyle:{"margin-bottom":"0px"}},[s("div",{staticClass:"column is-12"},[s("div",{staticClass:"box details"},[s("div",{staticClass:"box-title"},[s("i",{staticClass:"icon ion-md-document"}),t._v("\n\t\t  \t\t\tPages\n\t\t  \t\t\t"),s("el-tag",{attrs:{type:"danger"}},[t._v(t._s(t.totalPages))]),t._v(" "),s("el-button",{attrs:{size:"small",icon:"el-icon-circle-plus",type:"success",plain:""},on:{click:function(e){t.$router.push({path:"/page/new"})}}},[t._v("Add New Page")])],1),t._v(" "),t.Pages?s("div",{staticClass:"box-content"},[t._m(0),t._v(" "),t._l(t.Pages,function(e,i){return s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-1"},[s("a",{attrs:{target:"_blank",href:t._f("filterPageKey")("/"+i)}},[s("i",{staticClass:"icon ion-md-open"})])]),t._v(" "),s("div",{staticClass:"column is-5"},[s("router-link",{attrs:{to:"/page/"+i}},[t._v("\n\t\t  \t\t\t\t\t\t"+t._s(e.title)+"\n\t\t  \t\t\t\t\t\t"),e.folder?s("span",{staticClass:"tag is-dark"},[t._v(t._s(e.folder))]):t._e()])],1),t._v(" "),s("div",{staticClass:"column is-2"},[s("span",[t._v(t._s(e.created_at))])]),t._v(" "),s("div",{staticClass:"column is-2"},[s("span",[t._v(t._s(e.updated_at))])]),t._v(" "),s("div",{staticClass:"column is-1"},[s("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"","inactive-text":""},on:{change:function(s){t.togglePageVisibility(i,e)}},model:{value:e.visible,callback:function(s){t.$set(e,"visible",s)},expression:"Page.visible"}})],1),t._v(" "),s("div",{staticClass:"column is-1"},[s("i",{staticClass:"icon ion-md-trash deleteBtn",on:{click:function(e){t.deletePage(i)}}})])])})],2):t._e()])]),t._v(" "),s("div",{staticClass:"column is-12"},[s("div",{staticClass:"box details"},[s("div",{staticClass:"box-title"},[s("i",{staticClass:"icon ion-md-document"}),t._v("\n\t\t  \t\t\tFolders\n\t\t  \t\t\t"),s("el-button",{attrs:{size:"small",icon:"el-icon-circle-plus",type:"success",plain:""},on:{click:function(e){t.newFolderDialogVisible=!0}}},[t._v("Add Parent Folder")])],1),t._v(" "),t.Folders?s("div",{staticClass:"box-content"},[t._m(1),t._v(" "),t._l(t.Folders,function(e,i){return s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-10",staticStyle:{color:"white"}},[t._v("\n\t  \t\t\t\t\t\t"+t._s(i)+"\n  \t\t\t\t\t\t")]),t._v(" "),s("div",{staticClass:"column is-2"},[s("i",{staticClass:"icon ion-md-trash deleteBtn",on:{click:function(e){t.deleteFolder(i)}}})])])})],2):t._e()])])]),t._v(" "),s("el-dialog",{attrs:{visible:t.newFolderDialogVisible},on:{"update:visible":function(e){t.newFolderDialogVisible=e}}},[s("el-form",[s("p",[t._v("Add New Parent Folder")]),t._v(" "),s("el-form-item",{attrs:{label:"Folder Name","label-width":"100"}},[s("el-input",{attrs:{"auto-complete":"off"},model:{value:t.newFolder,callback:function(e){t.newFolder=e},expression:"newFolder"}})],1),t._v(" "),s("el-button",{on:{click:function(e){t.newFolderDialogVisible=!1}}},[t._v("Cancel")]),t._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(e){t.saveNewFolder()}}},[t._v("Confirm")])],1)],1)],1)},staticRenderFns:[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-1"},[s("p",[t._v("Open")])]),t._v(" "),s("div",{staticClass:"column is-5"},[s("p",[t._v("Title")])]),t._v(" "),s("div",{staticClass:"column is-2"},[s("p",[t._v("Created At")])]),t._v(" "),s("div",{staticClass:"column is-2"},[s("p",[t._v("Updated At")])]),t._v(" "),s("div",{staticClass:"column is-1"},[s("p",[t._v("Visible")])]),t._v(" "),s("div",{staticClass:"column is-1"},[s("p",[t._v("Delete")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"columns"},[e("div",{staticClass:"column is-10"},[e("p",[this._v("Name")])]),this._v(" "),e("div",{staticClass:"column is-2"},[e("p",[this._v("Delete")])])])}]};var l=s("VU/8")(i,a,!1,function(t){s("F49/")},"data-v-003b1895",null);e.default=l.exports}});
//# sourceMappingURL=6.bca129f22bd2d00936e7.js.map